<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data:; script-src 'self'; style-src 'self' 'unsafe-inline'">    <title>The Journal</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app-container">
        <!-- New: Invisible trigger area for the sidebar -->
        <div id="sidebar-trigger-zone"></div>
        
        <!-- The sidebar for navigation and note lists -->
        <div id="sidebar">
            <div id="sidebar-header">
                <button id="new-note-btn" class="sidebar-btn">New Note</button>
            </div>
            <div id="notes-list-container">
                <ul id="notes-list">
                    <!-- Active notes will be dynamically inserted here -->
                </ul>
            </div>
            <div id="sidebar-footer">
                <button id="recycle-bin-btn" class="sidebar-btn">Recycle Bin</button>
            </div>
        </div>

        <!-- The main content area where the editor will live -->
        <div id="main-content">
            <div id="tab-bar">
                <!-- Tabs will be dynamically inserted here -->
            </div>
            
            <div id="editor-container" class="hidden">
                <input type="text" id="note-title" placeholder="Your note title..." />
                <div id="editorjs"></div>
                <button id="delete-note-btn">Delete Note</button>
            </div>

            <div id="recycle-bin-actions-container" class="hidden">
              <h3>Recycle Bin</h3>
              <p>This note is in the recycle bin.</p>
              <div class="action-buttons">
                  <button id="restore-note-btn" class="action-btn restore">Restore Note</button>
                  <button id="perm-delete-note-btn" class="action-btn permanent-delete">Permanently Delete</button>
              </div>
            </div>
            
            <div id="welcome-message">
                <h2>Select a note to start editing, or create a new one.</h2>
            </div>
        </div>
    </div>

    <!-- MCP Server Integration Modal -->
    <div id="mcp-modal-overlay" class="modal-overlay hidden">
        <div class="modal-container">
            <div class="modal-header">
                <h2>MCP Server Started Successfully</h2>
                <button id="mcp-modal-close" class="modal-close-btn">&times;</button>
            </div>
            <div class="modal-content">
                <div class="modal-section">
                    <p><strong>Status:</strong> <span class="status-running">Running</span></p>
                    <p><strong>Server URL:</strong> <code>http://127.0.0.1:8001</code></p>
                    <p><strong>SSE Endpoint:</strong> <code>http://127.0.0.1:8001/sse</code></p>
                    <p><strong>Message Endpoint:</strong> <code>http://127.0.0.1:8001/messages/</code></p>
                </div>

                <div class="modal-section">
                    <h3>VS Code Integration</h3>
                    <p><strong>File:</strong> <code>~/.vscode/mcp.json</code> (Mac/Linux) or <code>%APPDATA%\Code\User\mcp.json</code> (Windows)</p>
                    <pre><code>{
  "mcpServers": {
    "git-tracker": {
      "url": "http://127.0.0.1:8001/sse"
    }
  }
}</code></pre>
                </div>

                <div class="modal-section">
                    <h3>Cursor Integration</h3>
                    <p><strong>File:</strong> <code>~/.cursor/mcp.json</code></p>
                    <pre><code>{
  "mcpServers": {
    "git-tracker": {
      "url": "http://127.0.0.1:8001/sse"
    }
  }
}</code></pre>
                </div>

                <div class="modal-section">
                    <h3>PyCharm Integration (via Continue plugin)</h3>
                    <ol>
                        <li>Install Continue plugin</li>
                        <li>Open Continue settings</li>
                        <li>Add MCP server configuration:</li>
                    </ol>
                    <pre><code>{
  "mcpServers": {
    "git-tracker": {
      "url": "http://127.0.0.1:8001/sse"
    }
  }
}</code></pre>
                </div>

                <div class="modal-footer">
                    <label>
                        <input type="checkbox" id="mcp-dont-show-again"> Don't show this again
                    </label>
                    <button id="mcp-modal-ok-btn" class="modal-ok-btn">Got it</button>
                </div>
            </div>
        </div>
    </div>

    <!-- NEW: Load Editor.js and plugins from node_modules -->
    <script src="libs/editor.js"></script>
    <script src="libs/header.js"></script>
    <script src="libs/list.js"></script>
    <script src="libs/code.js"></script>
    <!-- The defer attribute ensures the script runs after the document is parsed -->
    <script defer src="renderer.js"></script>
</body>
</html>